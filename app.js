const cheerio = require('cheerio');const superagent = require('superagent');const nodeSchedule = require('node-schedule')const fs = require('fs');const weiboURL = "https://s.weibo.com";const hotSearchURL = weiboURL + "/top/summary?cate=realtimehot";function getHotSearchList(){  return new Promise((resolve,reject)=>{    superagent.get(hotSearchURL,(err,res)=>{      if(err) console.log(err);      const $ = cheerio.load(res.text);      let hotList = [];      $('#pl_top_realtimehot table tbody tr').each(function(index){        if(index!==0){          const $td = $(this).children().eq(1);          const link = weiboURL + $td.find('a').attr('href');          const text = $td.find('a').text();          const hotValue = $td.find('span').text();          const icon = $td.find('img').attr('src') ? 'https:' + $td.find('img').attr('src') : '';          hotList.push({ index, link, text, hotValue, icon })        }      })      hotList.length ? resolve(hotList) : reject('error')    });  })}nodeSchedule.scheduleJob('30 * * * * *',async function(){  try {    const hotList = await getHotSearchList()    await fs.writeFileSync(`${__dirname}/hotSearch.json`,JSON.stringify(hotList),'utf-8')    console.log('发送请求成功')  }catch(error){    console.error(error)  }})// 以上代码可直接集成进现有的 express koa eggjs 或者原生的 nodejs 项目中，作为接口返回给前端。// 集成进 Serverless，作为接口返回给前端。// 对接微信公众号，发送 热搜 关键字即可实时获取热搜数据。// 集成进 微信机器人 ，每天在指定的时间给自己/群里发送微博热搜数据。